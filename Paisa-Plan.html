<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Paisa Path – Master Challenge</title>
  <style>
    :root {
      --bg: #0f1221;
      --panel: #171a2f;
      --ink: #e8ecff;
      --muted: #9aa4d6;
      --brand: #7c8cff;
      --accent: #56f0b0;
      --warn: #ffb870;
      --danger: #ff7a94;
      --card: #1d2140;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box }
    html, body { height: 100% }
    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 700px at 80% -10%, #1c214a 0%, #0f1221 60%);
      color: var(--ink);
    }
    a { color: var(--brand) }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 24px }
    header { display: flex; align-items: center; gap: 16px; justify-content: space-between; margin-bottom: 16px }
    .logo { display: flex; align-items: center; gap: 12px }
    .logo .mark {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--brand), #9df);
      display: grid;
      place-items: center;
      color: #101225;
      font-weight: 800;
      box-shadow: var(--shadow);
    }
    .title { font-size: 20px; font-weight: 800; letter-spacing: .2px }
    .grid { display: grid; grid-template-columns: 1.15fr .85fr; gap: 18px }
    @media (max-width: 980px) { .grid { grid-template-columns: 1fr } }
    
    aside {
      position: sticky;
      top: 24px;
      align-self: start;
    }
    
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.00));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px;
      padding: 18px;
      box-shadow: var(--shadow);
      transition: transform 0.2s ease;
      margin-bottom: 18px;
    }
    .card:hover { transform: translateY(-2px) }
    .card h2 { margin: 0 0 10px 0; font-size: 18px }
    .muted { color: var(--muted) }
    .scenario { display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px }
    .choices { display: grid; gap: 10px }
    .choice {
      border: 1px solid rgba(255,255,255,.1);
      background: var(--card);
      padding: 12px 14px;
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .choice:hover { outline: 2px solid rgba(124,140,255,.4); transform: translateY(-1px) }
    .choice.correct { border-color: rgba(86,240,176,.6); outline: 2px solid rgba(86,240,176,.6) }
    .choice.wrong { border-color: rgba(255,122,148,.6); outline: 2px solid rgba(255,122,148,.6) }
    .choice.neutral { border-color: var(--warn); outline: 2px solid var(--warn) }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #12152a;
      border: 1px solid rgba(255,255,255,.08);
      font-size: 12px;
      font-weight: 600;
    }
    .flex { display: flex; gap: 10px; align-items: center; flex-wrap: wrap }
    .points { font-weight: 800; color: var(--accent) }
    .streak { font-weight: 700; color: #c8d2ff }
    .footer { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px }
    button {
      background: linear-gradient(180deg, #2a2f62, #232750);
      border: 1px solid rgba(255,255,255,.12);
      color: var(--ink);
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    button:hover { background: linear-gradient(180deg, #3a3f72, #333760); transform: translateY(-1px) }
    button.primary { background: linear-gradient(180deg, #5164ff, #2737b8) }
    button.primary:hover { background: linear-gradient(180deg, #6174ff, #3747c8) }
    .cols { display: grid; grid-template-columns: 1fr 1fr; gap: 12px }
    @media (max-width: 680px) { .cols { grid-template-columns: 1fr } }
    input[type=text], input[type=number], textarea, select {
      width: 100%;
      background: #0f1226;
      border: 1px solid rgba(255,255,255,.12);
      color: var(--ink);
      padding: 10px 12px;
      border-radius: 12px;
      transition: border-color 0.2s ease;
    }
    input:focus, textarea:focus, select:focus { border-color: var(--brand); outline: none }
    .badge {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      background: linear-gradient(180deg, #1f2250, #181b3a);
      border: 1px solid rgba(255,255,255,.1);
      font-size: 12px;
      font-weight: 600;
    }
    .achievements { display: flex; flex-wrap: wrap; gap: 8px }
    .notice {
      border-left: 3px solid var(--brand);
      padding: 10px 12px;
      background: #11142b;
      border-radius: 8px;
      margin-top: 10px;
    }
    .small { font-size: 12px }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <div class="mark">PP</div>
        <div>
          <div class="title">Paisa Path</div>
          <div class="muted small">A game to navigate financial biases in India</div>
        </div>
      </div>
    </header>

    <div class="grid">
      <main id="main"></main>
      <aside>
        <div class="card">
          <h2>Player Stats</h2>
          <div class="flex">
            <span class="pill">Score: <span id="score" class="points">0</span></span>
            <span class="pill">Streak: <span id="streak" class="streak">0</span></span>
            <span class="pill">Level: <span id="level">1</span></span>
          </div>
        </div>

        <div class="card">
          <h2>Achievements</h2>
          <div id="achievements" class="achievements"></div>
        </div>

        <div class="card">
          <h2>Quick Tips</h2>
          <ul class="small muted">
            <li>Take a 5-second pause before any money decision.</li>
            <li>Write down rules to guide your financial choices.</li>
            <li>Avoid distractions like hype notifications.</li>
            <li>Check your spending habits weekly and celebrate smart choices.</li>
          </ul>
        </div>
      </aside>
    </div>

    <footer style="margin-top:18px" class="muted small">
      © Paisa Path. This learning game is for education, not financial advice.
    </footer>
  </div>

<script>
const initialState = { score: 0, streak: 0, level: 1, completed: false, achievements: [] };
let state = initialState;

function save() { localStorage.setItem('pp_paisa_path', JSON.stringify(state)); }
function load() { try { return JSON.parse(localStorage.getItem('pp_paisa_path')); } catch(e) { return null; } }
function reset() { state = JSON.parse(JSON.stringify(initialState)); save(); render(); alert('Progress reset.'); }

function addScore(points) {
  state.score += points;
  state.streak += (points > 0 ? 1 : 0);
  if (points <= 0) state.streak = 0;
  if (state.score >= state.level * 150) {
    state.level++;
    toast(`Level up! You reached Level ${state.level}`);
    award('Level ' + state.level);
  }
  save();
  updateHUD();
}

function complete() { state.completed = true; save(); updateHUD(); }
function isDone() { return state.completed; }

function award(name) {
  if (!state.achievements.includes(name)) {
    state.achievements.push(name);
    save();
    renderAchievements();
  }
}

function updateHUD() {
  document.getElementById('score').textContent = state.score;
  document.getElementById('streak').textContent = state.streak;
  document.getElementById('level').textContent = state.level;
}

function renderAchievements() {
  const box = document.getElementById('achievements');
  box.innerHTML = state.achievements.length ? '' : '<span class="muted small">No badges yet. Earn some!</span>';
  state.achievements.forEach(a => {
    const s = document.createElement('span');
    s.className = 'badge';
    s.textContent = a;
    box.appendChild(s);
  });
}

function toast(msg) {
  const el = document.createElement('div');
  el.textContent = msg;
  el.style.position = 'fixed';
  el.style.bottom = '20px';
  el.style.left = '50%';
  el.style.transform = 'translateX(-50%)';
  el.style.background = '#0b0f25';
  el.style.border = '1px solid rgba(255,255,255,.2)';
  el.style.padding = '10px 14px';
  el.style.borderRadius = '10px';
  el.style.boxShadow = 'var(--shadow)';
  el.style.zIndex = '9999';
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 1800);
}

const SCENARIOS = [
  {
    id: 's1',
    text: 'Your friends are planning a lavish trip to Europe, and you\'ve been invited. To afford it, you\'re considering taking out a personal loan. The bank offers a quick, low-interest loan with an easy application process.',
    choices: [
      {
        txt: 'Take the loan; experiences are priceless, and you\'ll pay it back later.',
        bias: 'Present Bias & Mental Accounting',
        why: 'You\'re prioritizing immediate gratification over future financial stability, treating the loan as "free money" for an experience. This ignores the real cost of interest and debt.',
        points: -30
      },
      {
        txt: 'Find a cheaper, shorter version of the trip to fit your current budget.',
        bias: 'Compromise Effect',
        why: 'While a compromise, you\'re still letting peer pressure drive a purchase you might not genuinely afford or need. It\'s a suboptimal choice driven by the desire to "fit in."',
        points: -10
      },
      {
        txt: 'Ask friends if they can split costs more evenly to make it affordable for you.',
        bias: 'Social Proof & Illusion of Control',
        why: 'You\'re allowing the social pressure to dictate your spending. Even if they split costs, the core issue is that you cannot afford the trip without external help or a loan.',
        points: -15
      },
      {
        txt: 'Decline the trip and immediately start saving for a similar trip next year, on your own terms.',
        bias: 'None',
        why: 'This shows financial discipline. You are prioritizing your financial health over social pressure and immediate desires, while still setting a realistic future goal.',
        points: 40
      }
    ]
  },
  {
    id: 's2',
    text: 'You just got a new credit card with a great rewards program (cashback, air miles). You decide to use it for ALL your expenses to maximize rewards.',
    choices: [
      {
        txt: 'Only use it for budgeted, essential expenses, and immediately pay the balance in full after each purchase.',
        bias: 'None',
        why: 'This demonstrates true financial discipline. You are leveraging rewards without increasing spending or risking debt, and you are actively managing your money.',
        points: 40
      },
      {
        txt: 'Use it for big purchases only, to get more points faster, then pay those off diligently.',
        bias: 'Mental Accounting & Illusion of Control',
        why: 'You\'re mentally separating "big" purchases from regular ones, but all credit card debt is the same. This can lead to overspending on expensive items you might not truly need.',
        points: -15
      },
      {
        txt: 'Keep the card for emergencies only, ignoring the rewards program entirely.',
        bias: 'Loss Aversion (Extreme)',
        why: 'While safe, this is an extreme reaction. It avoids risk but misses out on legitimate benefits if used responsibly. It shows a fear of loss overriding a balanced approach.',
        points: -10
      },
      {
        txt: 'Use it for all spending, but strictly pay the full balance monthly to avoid interest.',
        bias: 'Overconfidence & Optimism Bias',
        why: 'This relies on perfect discipline, which is difficult. Any slip-up (forgotten payment, unexpected expense) can lead to high interest, negating rewards. This is a common trap.',
        points: -25
      }
    ]
  },
  {
    id: 's3',
    text: 'Your cousin is getting married, and your parents insist you buy a gold coin as a wedding gift, saying, "Gold is an investment that will never lose its value."',
    choices: [
      {
        txt: 'Suggest contributing cash to the couple\'s honeymoon fund or a household item, explaining it\'s more practical.',
        bias: 'None',
        why: 'This approach respects sentiment while advocating for a financially practical gift. It prioritizes the couple\'s needs over traditional symbolism, without being dismissive.',
        points: 40
      },
      {
        txt: 'Buy a smaller, less expensive gold item to fulfill the spirit of the gift without overspending.',
        bias: 'Compromise Effect & Mental Accounting',
        why: 'You\'re still buying gold, driven by external pressure, rather than making an independent financial choice. It\'s a compromise that doesn\'t fully address the underlying financial question.',
        points: -10
      },
      {
        txt: 'Buy the gold coin but immediately sell it for cash to invest in something else you prefer.',
        bias: 'Loss Aversion & Overconfidence',
        why: 'This is a high-effort, low-reward plan. It incurs transaction costs and complicates a simple gift, driven by a desire to avoid the "loss" of buying gold, but with questionable practical benefit.',
        points: -15
      },
      {
        txt: 'Buy the gold coin; respect tradition, gold is always a safe asset in India.',
        bias: 'Status Quo & Authority Bias',
        why: 'You\'re deferring to tradition and family authority without questioning the financial wisdom. While gold has cultural significance, its investment value fluctuates and may not be optimal.',
        points: -20
      }
    ]
  },
  {
    id: 's4',
    text: 'All your friends are buying the latest high-end sports bike. You\'re starting to feel left out and are considering getting one yourself, even though it would require a significant loan.',
    choices: [
      {
        txt: 'Politely decline, focus on your pre-existing financial goals (e.g., house down payment, education).',
        bias: 'None',
        why: 'This demonstrates strong financial discipline. You are resisting peer pressure and prioritizing your long-term financial goals, which is crucial for building wealth.',
        points: 40
      },
      {
        txt: 'Research an older model or a different brand that\'s cheaper but still looks good.',
        bias: 'Mental Accounting & Confirmation Bias',
        why: 'You\'re still trying to justify the purchase due to peer pressure, just seeking a "cheaper" way into the same emotionally driven decision. This still leads to an unnecessary expense.',
        points: -15
      },
      {
        txt: 'Tell your friends you\'ll save up and buy it next year when you\'re more financially ready.',
        bias: 'Planning Fallacy & Overconfidence',
        why: 'You\'re overly optimistic about your future savings ability, and still letting the idea of the purchase linger due to social influence, setting yourself up for potential disappointment or a delayed bad decision.',
        points: -10
      },
      {
        txt: 'Buy the bike; life\'s short, enjoy your youth and the freedom it brings.',
        bias: 'Present Bias & Hedonic Treadmill',
        why: 'You\'re prioritizing immediate gratification and fleeting happiness over long-term financial stability. This decision can lead to significant debt and financial stress.',
        points: -30
      }
    ]
  },
  {
    id: 's5',
    text: 'Your child is now one year old, and you want to start saving for their education. You\'ve heard about various investment options but don\'t know where to begin.',
    choices: [
      {
        txt: 'Start a recurring deposit (RD) in a bank; it feels safe and traditional for child savings.',
        bias: 'Status Quo & Comfort Zone',
        why: 'While safe, an RD alone might not generate enough returns to beat inflation, especially over a 17-year period for education. It\'s a comfortable choice, but potentially insufficient for the goal.',
        points: -10
      },
      {
        txt: 'Consult a certified financial planner (CFP) to create a tailored, long-term education plan.',
        bias: 'None',
        why: 'This is the most prudent and disciplined approach. A CFP can provide unbiased advice, assess your risk tolerance, and create a diversified plan for your child\'s future education.',
        points: 40
      },
      {
        txt: 'Wait a few more years for your income to grow, then start saving aggressively.',
        bias: 'Present Bias & Procrastination',
        why: 'You\'re delaying an important long-term goal, missing out on the power of compounding. The earlier you start, the less you need to save overall.',
        points: -15
      },
      {
        txt: 'Invest in a popular, high-growth equity fund recommended by a friend or online guru.',
        bias: 'Social Proof & Overoptimism',
        why: 'You\'re relying on unverified advice and chasing high returns without understanding the risk. A child\'s education fund needs a balanced, long-term strategy, not a speculative bet.',
        points: -25
      }
    ]
  },
  {
    id: 's6',
    text: 'You want a new laptop. An online retailer offers a "No-Cost EMI" for 12 months with a "limited time" discount. The fine print mentions a processing fee and a slightly higher initial price.',
    choices: [
      {
        txt: 'Calculate the true total cost (price + fee) and compare it to paying upfront or buying from another retailer.',
        bias: 'None',
        why: 'This demonstrates critical thinking and due diligence. You are looking beyond the marketing to understand the actual financial impact, ensuring you make an informed decision.',
        points: 40
      },
      {
        txt: 'Ask the retailer to waive the processing fee and match the original non-discounted price.',
        bias: 'Illusion of Control & Overconfidence',
        why: 'You\'re overestimating your ability to negotiate with a large online retailer on a promotional offer. The terms are usually fixed, and this delays your decision for little benefit.',
        points: -10
      },
      {
        txt: 'Buy it, but plan to pay off the EMI early to avoid any hidden costs.',
        bias: 'Overconfidence & Planning Fallacy',
        why: 'You\'re assuming perfect future discipline. This plan introduces a new obligation with potential fees, relying on a future action to mitigate a current suboptimal decision.',
        points: -15
      },
      {
        txt: 'Buy it; the EMI is no-cost, and the discount means you save money overall.',
        bias: 'Framing & Anchoring',
        why: 'The "no-cost" framing is misleading. The processing fee and higher price mean you are still paying for the convenience, making it not truly "no-cost" or the best discount.',
        points: -30
      }
    ]
  },
  {
    id: 's7',
    text: 'A family member has a medical emergency, needing expensive surgery. You don\'t have health insurance or an emergency fund.',
    choices: [
      {
        txt: 'Explore government schemes, charity options, and negotiate hospital costs while simultaneously arranging an ethical, structured loan if needed.',
        bias: 'None',
        why: 'This is the most resourceful and disciplined approach. It combines immediate action with strategic planning to minimize costs and avoids impulsive, high-interest debt.',
        points: 40
      },
      {
        txt: 'Sell an illiquid asset (e.g., land, ancestral gold) for immediate funds, accepting a lower price.',
        bias: 'Endowment Effect & Loss Aversion',
        why: 'You\'re accepting a significant loss on a valuable asset due to urgency, driven by a lack of prior planning. Illiquid assets are not suitable for emergency funds precisely for this reason.',
        points: -25
      },
      {
        txt: 'Apply for a high-interest personal loan from a private lender for quick, no-questions-asked access to funds.',
        bias: 'Present Bias & Urgency',
        why: 'This addresses the immediate need but at a massive long-term cost, plunging you into significant, expensive debt. It\'s a desperate, undisciplined choice driven by panic.',
        points: -30
      },
      {
        txt: 'Immediately borrow from multiple friends and family for quick cash.',
        bias: 'Reliance on Social Network & Short-term Fix',
        why: 'While necessary, this is a reactive, unorganized approach that puts stress on relationships and might lead to varied interest rates. It addresses the symptom, not the underlying financial vulnerability.',
        points: -20
      }
    ]
  }
];

function renderScenarios(root) {
  root.innerHTML = '';
  const card = document.createElement('div');
  card.className = 'card';
  const done = isDone();
  card.innerHTML = `<h2>Paisa Path ${done ? '<span class="badge">Completed</span>' : ''}</h2>
    <div class="muted">Pick the smart choice. Learn why mistakes happen. Earn points.</div>`;

  SCENARIOS.forEach(s => {
    const box = document.createElement('div');
    box.className = 'scenario';
    box.innerHTML = `<div class="pill">Scenario ${s.id.toUpperCase()}</div>
      <div class="muted">${s.text}</div>`;
    const choices = document.createElement('div');
    choices.className = 'choices';
    s.choices.forEach(c => {
      const btn = document.createElement('button');
      btn.className = 'choice';
      btn.innerHTML = `<div style="font-weight:600">${c.txt}</div>`;
      btn.onclick = () => {
        const classToAdd = c.points > 0 ? 'correct' : (c.points < 0 ? 'wrong' : 'neutral');
        btn.classList.add(classToAdd);
        addScore(c.points);
        const feedback = document.createElement('div');
        feedback.className = 'notice small';
        feedback.innerHTML = `<div><strong>Bias:</strong> ${c.bias}</div>
          <div><strong>Why it happens:</strong> ${c.why}</div>`;
        btn.after(feedback);
        // Only show "Smart choice" for correct answers or neutral ones that offer guidance
        if (c.rational) {
          feedback.innerHTML += `<div><strong>Smart choice:</strong> ${c.rational}</div>`;
        }
        [...choices.children].forEach(b => b.disabled = true);
        checkScenarioCompletion();
      };
      choices.appendChild(btn);
    });
    box.appendChild(choices);
    card.appendChild(box);
  });

  const footer = document.createElement('div');
  footer.className = 'footer';
  const resetBtn = document.createElement('button');
  resetBtn.textContent = 'Retry All';
  resetBtn.onclick = () => render();
  footer.appendChild(resetBtn);
  card.appendChild(footer);
  root.appendChild(card);
}

function checkScenarioCompletion() {
  const allChoicesMade = [...document.querySelectorAll('.scenario .choices')].every(choicesDiv => {
    return [...choicesDiv.children].some(button => button.disabled);
  });

  if (allChoicesMade) {
    complete();
    award('Paisa Path Master');
    toast('Congratulations! You completed the Master Challenge!');
    updateHUD();
  }
}

function render() {
  state = load() || JSON.parse(JSON.stringify(initialState)); // Load state, or use initial if none
  if (state.completed) { // If completed, render with all feedback visible
    const main = document.getElementById('main');
    main.innerHTML = '';
    renderScenarios(main);
    // Re-enable clicks but ensure feedback is shown
    SCENARIOS.forEach((s, sIndex) => {
      const choicesContainer = document.querySelectorAll('.scenario .choices')[sIndex];
      s.choices.forEach((c, cIndex) => {
        const btn = choicesContainer.children[cIndex];
        btn.disabled = false; // Temporarily re-enable to trigger feedback
        const classToAdd = c.points > 0 ? 'correct' : (c.points < 0 ? 'wrong' : 'neutral');
        btn.classList.add(classToAdd); // Add class if it was the chosen one
        // If this was the chosen option in a previous session (or just completed), show feedback
        // This logic would be more complex if tracking actual chosen options.
        // For now, we'll just re-render to allow review.
      });
    });
  } else {
    state = JSON.parse(JSON.stringify(initialState)); // Reset to initial state if not completed
    save();
    const main = document.getElementById('main');
    main.innerHTML = '';
    renderScenarios(main);
  }
  updateHUD();
  renderAchievements();
}

window.PP = { reset };
render();
</script>
</body>
</html>
